import * as fs from 'fs';
import * as path from 'path';
// @ts-ignore
import UserAgent from 'user-agents';

const outputPath = path.join(process.cwd(), 'agents.json');

// 1. Generate real browser agents (Desktop & Mobile)
console.log('Generating real browser agents...');
const realAgents = new Set<string>();

// Generate 500 Desktop Windows
const windows = new UserAgent({ deviceCategory: 'desktop', platform: 'Win32' });
for (let i = 0; i < 500; i++) realAgents.add(windows.random().toString());

// Generate 200 Desktop Mac
const mac = new UserAgent({ deviceCategory: 'desktop', platform: 'MacIntel' });
for (let i = 0; i < 200; i++) realAgents.add(mac.random().toString());

// Generate 100 Mobile (iOS/Android) for variety in backup strategies
const mobile = new UserAgent({ deviceCategory: 'mobile' });
for (let i = 0; i < 100; i++) realAgents.add(mobile.random().toString());

// 2. Add Major Bots (from the user's list)
// Using known strings for these to ensure accuracy
const botAgents = [
    // Google
    "Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)",
    "Mozilla/5.0 AppleWebKit/537.36 (KHTML, like Gecko; compatible; Googlebot/2.1; +http://www.google.com/bot.html) Safari/537.36",

    // Bing
    "Mozilla/5.0 (compatible; bingbot/2.0; +http://www.bing.com/bingbot.htm)",

    // DuckDuckGo
    "DuckDuckBot/1.0; (+http://duckduckgo.com/duckduckbot.html)",

    // Baidu
    "Mozilla/5.0 (compatible; Baiduspider/2.0; +http://www.baidu.com/search/spider.html)",

    // Apple
    "(Applebot/0.1; +http://www.apple.com/go/applebot)",

    // Facebook
    "facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)",

    // Discord
    "Mozilla/5.0 (compatible; Discordbot/2.0; +https://discordapp.com)",

    // Twitter/X
    "Twitterbot/1.0",

    // LinkedIn
    "LinkedInBot/1.0 (compatible; Mozilla/5.0; Jakarta Commons-HttpClient/3.1 +http://www.linkedin.com)",

    // Pinterest
    "Pinterestbot/1.0 (+http://www.pinterest.com/bot.html)",

    // Slack
    "Slackbot 1.0 (+https://api.slack.com/robots)",

    // Ahrefs
    "Mozilla/5.0 (compatible; AhrefsBot/7.0; +http://ahrefs.com/robot/)",

    // SEMrush
    "Mozilla/5.0 (compatible; SemrushBot/7~bl; +http://www.semrush.com/bot.html)",
];

botAgents.forEach(agent => realAgents.add(agent));

// 3. Write to file
const finalAgents = Array.from(realAgents);
fs.writeFileSync(outputPath, JSON.stringify(finalAgents, null, 2));

console.log(`Successfully created agents.json with ${finalAgents.length} total user agents.`);
console.log(`- Real Browsers: ${finalAgents.length - botAgents.length}`);
console.log(`- Bots/Crawlers: ${botAgents.length}`);
